<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>架構設計 - ATM Banking System</title>
    <meta name="description" content="ATM Banking System 系統架構與設計說明 - 類別圖、循序圖、設計模式詳解">
    <meta name="keywords" content="系統架構, 設計模式, UML, 類別圖, 循序圖, 軟體設計">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="架構設計 - ATM Banking System">
    <meta property="og:description" content="ATM Banking System 系統架構與設計說明">
    <meta property="og:type" content="website">
    <meta property="og:image" content="assets/images/og-image.svg">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="assets/images/favicon.svg" type="image/svg+xml">
    
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 導航列 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-university"></i>
                <span>ATM Banking System</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">首頁</a>
                </li>
                <li class="nav-item">
                    <a href="getting-started.html" class="nav-link">快速開始</a>
                </li>
                <li class="nav-item">
                    <a href="user-guide.html" class="nav-link">使用者指南</a>
                </li>                <li class="nav-item">
                    <a href="api-reference.html" class="nav-link">程式碼參考</a>
                </li>
                <li class="nav-item">
                    <a href="architecture.html" class="nav-link active">架構設計</a>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- 主要內容 -->
    <main class="docs-main">
        <div class="docs-container">
            <!-- 側邊欄 -->
            <aside class="docs-sidebar">
                <div class="sidebar-content">
                    <h3>架構設計</h3>
                    <nav class="sidebar-nav">
                        <ul>
                            <li><a href="#overview">系統概覽</a></li>
                            <li><a href="#architecture-principles">架構原則</a></li>
                            <li><a href="#system-components">系統組件</a>
                                <ul>
                                    <li><a href="#presentation-layer">展示層</a></li>
                                    <li><a href="#business-layer">業務層</a></li>
                                    <li><a href="#data-layer">資料層</a></li>
                                </ul>
                            </li>
                            <li><a href="#class-diagram">類別圖</a></li>
                            <li><a href="#sequence-diagrams">循序圖</a>
                                <ul>
                                    <li><a href="#login-sequence">登入流程</a></li>
                                    <li><a href="#withdraw-sequence">提款流程</a></li>
                                    <li><a href="#transfer-sequence">轉帳流程</a></li>
                                </ul>
                            </li>
                            <li><a href="#security-architecture">安全架構</a></li>
                            <li><a href="#data-flow">資料流程</a></li>
                            <li><a href="#design-patterns">設計模式</a></li>
                            <li><a href="#scalability">擴展性設計</a></li>
                            <li><a href="#performance">效能考量</a></li>
                        </ul>
                    </nav>
                </div>
            </aside>

            <!-- 文檔內容 -->
            <div class="docs-content">
                <header class="docs-header">
                    <h1>系統架構設計</h1>
                    <p>ATM Banking System 的完整架構設計與技術說明</p>
                </header>                <section id="overview" class="docs-section">
                    <h2><i class="fas fa-sitemap"></i> 系統概覽</h2>
                    <p>ATM Banking System 採用Qt Framework的MVC架構設計，將應用程式分為三個主要層次：視窗介面層、控制器層和資料存取層，提供清晰的職責分離和良好的維護性。</p>
                    
                    <div class="architecture-overview">
                        <div class="layer-diagram">
                            <div class="layer presentation">
                                <h3><i class="fas fa-desktop"></i> 視窗介面層 (UI Layer)</h3>
                                <p>基於Qt的圖形使用者介面，包含14個專門視窗模組</p>
                            </div>
                            <div class="layer business">
                                <h3><i class="fas fa-cogs"></i> 控制器層 (Controller Layer)</h3>
                                <p>處理業務邏輯和視窗間的協調，使用信號槽機制</p>
                            </div>
                            <div class="layer data">
                                <h3><i class="fas fa-database"></i> 資料存取層 (Data Layer)</h3>
                                <p>基於SQLite的資料庫管理系統</p>
                            </div>
                        </div>
                    </div>

                    <div class="tech-specs">
                        <div class="spec-card">
                            <h3><i class="fas fa-code"></i> 技術棧</h3>
                            <ul>
                                <li>GUI框架：Qt 6.9.0</li>
                                <li>建構工具：qmake</li>
                                <li>資料庫：SQLite</li>
                                <li>樣式系統：QSS (Qt Style Sheets)</li>
                            </ul>
                        </div>
                        <div class="spec-card">
                            <h3><i class="fas fa-cubes"></i> 架構特色</h3>
                            <ul>
                                <li>Qt信號槽機制</li>
                                <li>MVC架構模式</li>
                                <li>模組化視窗設計</li>
                                <li>SQLite資料持久化</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="architecture-principles" class="docs-section">
                    <h2><i class="fas fa-balance-scale"></i> 架構原則</h2>
                    
                    <div class="principles-grid">
                        <div class="principle-card">
                            <h3><i class="fas fa-layer-group"></i> 關注點分離</h3>
                            <p>將使用者介面、業務邏輯和資料存取分離到不同的層次，確保每個層次專注於自己的職責。</p>
                        </div>
                        <div class="principle-card">
                            <h3><i class="fas fa-plug"></i> 低耦合度</h3>
                            <p>各個模組之間的依賴性降到最低，提高系統的可維護性和可測試性。</p>
                        </div>
                        <div class="principle-card">
                            <h3><i class="fas fa-expand-arrows-alt"></i> 高內聚性</h3>
                            <p>相關功能聚集在同一個模組中，提高程式碼的可讀性和重用性。</p>
                        </div>
                        <div class="principle-card">
                            <h3><i class="fas fa-shield-alt"></i> 安全第一</h3>
                            <p>在架構設計中優先考慮安全性，包括資料加密、存取控制和錯誤處理。</p>
                        </div>
                    </div>
                </section>

                <section id="system-components" class="docs-section">
                    <h2><i class="fas fa-puzzle-piece"></i> 系統組件</h2>                    <div id="presentation-layer" class="component-section">
                        <h3><i class="fas fa-desktop"></i> 視窗介面層 (UI Layer)</h3>
                        <p>負責與用戶的互動，基於Qt Framework實現的圖形使用者介面，包含多個專門化的視窗模組。</p>
                        
                        <div class="component-details">
                            <h4>主要組件：</h4>
                            <ul>
                                <li><strong>loginWindow：</strong> 主要的登入介面，處理用戶和管理員登入</li>
                                <li><strong>userWindow：</strong> 用戶主介面，提供銀行操作選單</li>
                                <li><strong>adminWindow：</strong> 管理員介面，提供系統管理功能</li>
                                <li><strong>專門視窗：</strong> 提款、存款、轉帳、修改密碼等專用視窗</li>
                            </ul>

                            <div class="code-block">
                                <pre><code>Qt視窗架構
├── loginWindow (登入視窗)
│   ├── 用戶登入
│   ├── 管理員登入
│   └── 系統設定
├── userWindow (用戶主視窗)
│   ├── 查詢餘額
│   ├── 快速提款 (1000/2000/3000/5000/10000)
│   ├── 存款操作
│   ├── 轉帳功能
│   ├── 交易記錄
│   └── 修改密碼
├── adminWindow (管理員視窗)
│   ├── 用戶清單管理
│   ├── 新增用戶帳戶
│   ├── 設定帳戶狀態
│   └── 系統統計資料
└── 專門操作視窗
    ├── withdrowWindow (提款視窗)
    ├── depositWindow (存款視窗)
    ├── transWindow (轉帳視窗)
    ├── changepasswordWindow (修改密碼)
    ├── summaryWindow (交易摘要)
    └── acclistWindow (帳戶清單)</code></pre>
                            </div>
                        </div>
                    </div>                    <div id="business-layer" class="component-section">
                        <h3><i class="fas fa-cogs"></i> 控制器層 (Controller Layer)</h3>
                        <p>包含所有的業務邏輯和規則，處理銀行操作的核心功能，使用Qt信號槽機制協調各視窗間的互動。</p>
                        
                        <div class="component-details">
                            <h4>核心模組：</h4>
                            <div class="module-grid">
                                <div class="module-card">
                                    <h5><i class="fas fa-cogs"></i> Controller 模組</h5>
                                    <ul>
                                        <li>中央控制器邏輯</li>
                                        <li>視窗間信號槽協調</li>
                                        <li>業務流程控制</li>
                                        <li>錯誤處理機制</li>
                                    </ul>
                                </div>
                                <div class="module-card">
                                    <h5><i class="fas fa-database"></i> DatabaseManager 模組</h5>
                                    <ul>
                                        <li>SQLite資料庫連接</li>
                                        <li>帳戶資料管理</li>
                                        <li>交易記錄處理</li>
                                        <li>資料查詢與更新</li>
                                    </ul>
                                </div>
                                <div class="module-card">
                                    <h5><i class="fas fa-exchange-alt"></i> 交易處理模組</h5>
                                    <ul>
                                        <li>提款功能處理</li>
                                        <li>存款功能處理</li>
                                        <li>轉帳功能處理</li>
                                        <li>交易驗證邏輯</li>
                                    </ul>
                                </div>
                                <div class="module-card">
                                    <h5><i class="fas fa-shield-alt"></i> 安全驗證模組</h5>
                                    <ul>
                                        <li>密碼驗證 (SHA-256)</li>
                                        <li>登入狀態管理</li>
                                        <li>權限控制檢查</li>
                                        <li>QMessageBox錯誤提示</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="data-layer" class="component-section">
                        <h3><i class="fas fa-database"></i> 資料存取層 (Data Layer)</h3>
                        <p>負責資料的持久化存儲和檢索，使用SQLite資料庫存儲帳戶和交易資料。</p>
                        
                        <div class="component-details">
                            <h4>SQLite資料庫結構：</h4>
                            <div class="code-block">
                                <pre><code>-- 用戶帳戶表
CREATE TABLE users (
    account_id TEXT PRIMARY KEY,
    password TEXT NOT NULL,
    balance REAL DEFAULT 0.0,
    account_type TEXT DEFAULT 'user',
    status TEXT DEFAULT 'active',
    created_date TEXT DEFAULT CURRENT_TIMESTAMP
);

-- 交易記錄表  
CREATE TABLE transactions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_id TEXT NOT NULL,
    transaction_type TEXT NOT NULL,
    amount REAL NOT NULL,
    target_account TEXT,
    timestamp TEXT DEFAULT CURRENT_TIMESTAMP,
    description TEXT,
    FOREIGN KEY (account_id) REFERENCES users(account_id)
);

-- 預設測試帳戶
INSERT INTO users VALUES 
('123', SHA256('3210'), 50000.0, 'user', 'active', CURRENT_TIMESTAMP),
('admin', SHA256('5678'), 0.0, 'admin', 'active', CURRENT_TIMESTAMP);</code></pre>
                            </div>
                        </div>
                    </div>
                </section>                <section id="class-diagram" class="docs-section">
                    <h2><i class="fas fa-project-diagram"></i> 類別圖</h2>
                    <p>系統的主要類別及其關係圖（基於Qt架構）：</p>
                    
                    <div class="diagram-container">
                        <div class="class-diagram">
                            <div class="class-box atm-class">
                                <h4>Controller</h4>
                                <div class="attributes">
                                    <p>- dbManager: DatabaseManager*</p>
                                    <p>- currentAccountId: QString</p>
                                    <p>- isUserLoggedIn: bool</p>
                                    <p>- isAdminLoggedIn: bool</p>
                                </div>
                                <div class="methods">
                                    <p>+ login(QString, QString): bool</p>
                                    <p>+ logout(): void</p>
                                    <p>+ getBalance(QString): double</p>
                                    <p>+ processTransaction(): void</p>
                                    <p>+ validateCredentials(): bool</p>
                                </div>
                            </div>

                            <div class="class-box bank-class">
                                <h4>DatabaseManager</h4>
                                <div class="attributes">
                                    <p>- db: QSqlDatabase</p>
                                    <p>- dbPath: QString</p>
                                </div>
                                <div class="methods">
                                    <p>+ initializeDatabase(): bool</p>
                                    <p>+ createUser(QString, QString): bool</p>
                                    <p>+ authenticateUser(QString, QString): bool</p>
                                    <p>+ updateBalance(QString, double): bool</p>
                                    <p>+ getTransactionHistory(QString): QList</p>
                                </div>
                            </div>

                            <div class="class-box account-class">
                                <h4>loginWindow</h4>
                                <div class="attributes">
                                    <p>- ui: Ui::loginWindow*</p>
                                    <p>- controller: Controller*</p>
                                </div>
                                <div class="methods">
                                    <p>+ on_userLoginButton_clicked(): void</p>
                                    <p>+ on_adminLoginButton_clicked(): void</p>
                                    <p>+ validateInput(): bool</p>
                                    <p>+ showErrorMessage(QString): void</p>
                                </div>
                            </div>

                            <div class="class-box transaction-class">
                                <h4>userWindow</h4>
                                <div class="attributes">
                                    <p>- ui: Ui::userWindow*</p>
                                    <p>- controller: Controller*</p>
                                    <p>- currentAccountId: QString</p>
                                </div>
                                <div class="methods">
                                    <p>+ on_withdrawButton_clicked(): void</p>
                                    <p>+ on_depositButton_clicked(): void</p>
                                    <p>+ on_transferButton_clicked(): void</p>
                                    <p>+ updateBalanceDisplay(): void</p>
                                </div>
                            </div>
                        </div>

                        <div class="relationships">
                            <p><strong>關係說明：</strong></p>
                            <ul>
                                <li>Controller <strong>使用</strong> DatabaseManager (1:1)</li>
                                <li>loginWindow <strong>依賴</strong> Controller (1:1)</li>
                                <li>userWindow <strong>依賴</strong> Controller (1:1)</li>
                                <li>Qt視窗間使用 <strong>信號槽機制</strong> 通訊</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="sequence-diagrams" class="docs-section">
                    <h2><i class="fas fa-long-arrow-alt-right"></i> 循序圖</h2>                    <div id="login-sequence" class="sequence-section">
                        <h3><i class="fas fa-sign-in-alt"></i> 用戶登入流程</h3>
                        <div class="sequence-diagram">
                            <div class="sequence-step">
                                <div class="step-number">1</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>loginWindow</strong>: 點擊用戶登入按鈕
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">2</div>
                                <div class="step-description">
                                    <strong>loginWindow</strong> → <strong>用戶</strong>: 顯示帳號密碼輸入框
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">3</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>loginWindow</strong>: 輸入帳號和密碼
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">4</div>
                                <div class="step-description">
                                    <strong>loginWindow</strong> → <strong>Controller</strong>: 發出login信號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">5</div>
                                <div class="step-description">
                                    <strong>Controller</strong> → <strong>DatabaseManager</strong>: authenticateUser(accountId, password)
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">6</div>
                                <div class="step-description">
                                    <strong>DatabaseManager</strong> → <strong>Controller</strong>: 回傳驗證結果
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">7</div>
                                <div class="step-description">
                                    <strong>Controller</strong> → <strong>loginWindow</strong>: 發出loginResult信號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">8</div>
                                <div class="step-description">
                                    <strong>loginWindow</strong> → <strong>userWindow</strong>: 開啟用戶主視窗
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">9</div>
                                <div class="step-description">
                                    <strong>userWindow</strong> → <strong>用戶</strong>: 顯示用戶操作介面
                                </div>
                            </div>
                        </div>
                    </div>                    <div id="withdraw-sequence" class="sequence-section">
                        <h3><i class="fas fa-money-bill-wave"></i> 提款操作流程</h3>
                        <div class="sequence-diagram">
                            <div class="sequence-step">
                                <div class="step-number">1</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>userWindow</strong>: 點擊提款按鈕或快速提款按鈕
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">2</div>
                                <div class="step-description">
                                    <strong>userWindow</strong> → <strong>withdrowWindow</strong>: 開啟提款視窗
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">3</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>withdrowWindow</strong>: 輸入提款金額或選擇快速金額
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">4</div>
                                <div class="step-description">
                                    <strong>withdrowWindow</strong> → <strong>Controller</strong>: 發出withdraw信號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">5</div>
                                <div class="step-description">
                                    <strong>Controller</strong> → <strong>DatabaseManager</strong>: 檢查帳戶餘額
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">6</div>
                                <div class="step-description">
                                    <strong>DatabaseManager</strong> → <strong>DatabaseManager</strong>: 更新餘額並記錄交易
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">7</div>
                                <div class="step-description">
                                    <strong>DatabaseManager</strong> → <strong>Controller</strong>: 回傳操作結果
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">8</div>
                                <div class="step-description">
                                    <strong>Controller</strong> → <strong>withdrowWindow</strong>: 發出操作完成信號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">9</div>
                                <div class="step-description">
                                    <strong>withdrowWindow</strong> → <strong>用戶</strong>: 顯示提款成功訊息
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="transfer-sequence" class="sequence-section">
                        <h3><i class="fas fa-exchange-alt"></i> 轉帳操作流程</h3>
                        <div class="sequence-diagram">
                            <div class="sequence-step">
                                <div class="step-number">1</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>userWindow</strong>: 點擊轉帳按鈕
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">2</div>
                                <div class="step-description">
                                    <strong>userWindow</strong> → <strong>transWindow</strong>: 開啟轉帳視窗
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">3</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>transWindow</strong>: 輸入收款帳號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">4</div>
                                <div class="step-description">
                                    <strong>transWindow</strong> → <strong>Controller</strong>: 驗證收款帳號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">5</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>transWindow</strong>: 輸入轉帳金額
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">6</div>
                                <div class="step-description">
                                    <strong>transWindow</strong> → <strong>Controller</strong>: 發出transfer信號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">7</div>
                                <div class="step-description">
                                    <strong>Controller</strong> → <strong>DatabaseManager</strong>: 執行轉帳交易
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">8</div>
                                <div class="step-description">
                                    <strong>DatabaseManager</strong> → <strong>DatabaseManager</strong>: 同時更新兩個帳戶餘額
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">9</div>
                                <div class="step-description">
                                    <strong>Controller</strong> → <strong>transWindow</strong>: 回傳轉帳結果
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">10</div>
                                <div class="step-description">
                                    <strong>transWindow</strong> → <strong>用戶</strong>: 顯示轉帳完成訊息
                                </div>
                            </div>
                        </div>
                    </div>
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">2</div>
                                <div class="step-description">
                                    <strong>ATM</strong> → <strong>用戶</strong>: 請求輸入收款帳號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">3</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>ATM</strong>: 輸入收款帳號
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">4</div>
                                <div class="step-description">
                                    <strong>ATM</strong> → <strong>Bank</strong>: findAccount(toAccount)
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">5</div>
                                <div class="step-description">
                                    <strong>ATM</strong> → <strong>用戶</strong>: 請求輸入轉帳金額
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">6</div>
                                <div class="step-description">
                                    <strong>用戶</strong> → <strong>ATM</strong>: 輸入金額
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">7</div>
                                <div class="step-description">
                                    <strong>ATM</strong> → <strong>Bank</strong>: transfer(fromAccount, toAccount, amount)
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">8</div>
                                <div class="step-description">
                                    <strong>Bank</strong> → <strong>Account</strong>: withdraw(amount) [from]
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">9</div>
                                <div class="step-description">
                                    <strong>Bank</strong> → <strong>Account</strong>: deposit(amount) [to]
                                </div>
                            </div>
                            <div class="sequence-step">
                                <div class="step-number">10</div>
                                <div class="step-description">
                                    <strong>Bank</strong> → <strong>ATM</strong>: 回傳轉帳結果
                                </div>
                            </div>
                        </div>
                    </div>
                </section>                <section id="security-architecture" class="docs-section">
                    <h2><i class="fas fa-shield-alt"></i> 安全架構</h2>
                    
                    <div class="security-layers">
                        <div class="security-layer">
                            <h3><i class="fas fa-key"></i> 身份驗證層</h3>
                            <ul>
                                <li><strong>密碼驗證：</strong> SHA-256加密的密碼保護</li>
                                <li><strong>帳戶狀態管理：</strong> active/inactive狀態控制</li>
                                <li><strong>管理員認證：</strong> 獨立的管理員登入系統</li>
                                <li><strong>Qt輸入驗證：</strong> QLineEdit格式限制</li>
                            </ul>
                        </div>
                        
                        <div class="security-layer">
                            <h3><i class="fas fa-lock"></i> 授權控制層</h3>
                            <ul>
                                <li><strong>角色分離：</strong> 用戶與管理員功能分離</li>
                                <li><strong>視窗權限控制：</strong> 基於角色的視窗存取</li>
                                <li><strong>資料隔離：</strong> 用戶只能存取自己的帳戶</li>
                                <li><strong>操作驗證：</strong> 每次交易前重新驗證</li>
                            </ul>
                        </div>
                        
                        <div class="security-layer">
                            <h3><i class="fas fa-history"></i> 審計追蹤層</h3>
                            <ul>
                                <li><strong>交易記錄：</strong> SQLite資料庫完整記錄</li>
                                <li><strong>Qt錯誤處理：</strong> QMessageBox統一錯誤提示</li>
                                <li><strong>時間戳記：</strong> 所有操作時間記錄</li>
                                <li><strong>資料庫日誌：</strong> SQLite交易日誌</li>
                            </ul>
                        </div>
                    </div>

                    <div class="security-measures">
                        <h3>安全措施實作</h3>
                        <div class="code-block">
                            <pre><code>// Qt密碼驗證與SHA-256加密
bool DatabaseManager::authenticateUser(const QString& accountId, const QString& password) {
    QSqlQuery query(db);
    query.prepare("SELECT password FROM users WHERE account_id = ?");
    query.addBindValue(accountId);
    
    if (query.exec() && query.next()) {
        QString storedHash = query.value(0).toString();
        QString inputHash = QString(QCryptographicHash::hash(
            password.toUtf8(), QCryptographicHash::Sha256).toHex());
        return (storedHash == inputHash);
    }
    return false;
}

// Qt錯誤提示處理
void loginWindow::showError(const QString& message) {
    QMessageBox::warning(this, "登入錯誤", message);
}

// 交易金額驗證
bool Controller::validateAmount(double amount) {
    if (amount <= 0) {
        QMessageBox::warning(nullptr, "錯誤", "金額必須大於零");
        return false;
    }
    if (amount > 50000) {
        QMessageBox::warning(nullptr, "錯誤", "單次交易限額為50,000");
        return false;
    }
    return true;
}</code></pre>
                        </div>
                    </div>
                </section>                <section id="data-flow" class="docs-section">
                    <h2><i class="fas fa-stream"></i> 資料流程</h2>
                    
                    <div class="data-flow-diagram">
                        <h3>系統資料流向</h3>
                        <div class="flow-steps">
                            <div class="flow-step">
                                <div class="step-icon"><i class="fas fa-user"></i></div>
                                <h4>用戶輸入</h4>
                                <p>帳號、密碼、交易資訊</p>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon"><i class="fas fa-desktop"></i></div>
                                <h4>Qt視窗介面</h4>
                                <p>QLineEdit驗證、QMessageBox提示</p>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon"><i class="fas fa-cogs"></i></div>
                                <h4>Controller控制器</h4>
                                <p>信號槽處理、業務邏輯驗證</p>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon"><i class="fas fa-database"></i></div>
                                <h4>SQLite資料庫</h4>
                                <p>資料查詢與更新</p>
                            </div>
                        </div>
                    </div>

                    <div class="data-persistence">
                        <h3>資料持久化策略</h3>
                        <div class="persistence-grid">
                            <div class="persistence-card">
                                <h4><i class="fas fa-save"></i> 即時存檔</h4>
                                <p>每次交易完成後立即提交SQLite事務</p>
                            </div>
                            <div class="persistence-card">
                                <h4><i class="fas fa-shield-alt"></i> 資料完整性</h4>
                                <p>使用SQLite ACID特性確保資料一致性</p>
                            </div>
                            <div class="persistence-card">
                                <h4><i class="fas fa-history"></i> 交易記錄</h4>
                                <p>完整的交易歷史記錄與時間戳</p>
                            </div>
                            <div class="persistence-card">
                                <h4><i class="fas fa-sync-alt"></i> 自動連接</h4>
                                <p>Qt應用程式啟動時自動連接資料庫</p>
                            </div>
                        </div>
                    </div>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon"><i class="fas fa-cogs"></i></div>
                                <h4>業務邏輯</h4>
                                <p>身份驗證、交易處理</p>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon"><i class="fas fa-database"></i></div>
                                <h4>資料儲存</h4>
                                <p>JSON 檔案讀寫</p>
                            </div>
                        </div>
                    </div>

                    <div class="data-persistence">
                        <h3>資料持久化策略</h3>
                        <div class="persistence-grid">
                            <div class="persistence-card">
                                <h4><i class="fas fa-save"></i> 即時存檔</h4>
                                <p>每次交易完成後立即保存資料到檔案</p>
                            </div>
                            <div class="persistence-card">
                                <h4><i class="fas fa-shield-alt"></i> 資料完整性</h4>
                                <p>使用 JSON 格式確保資料結構完整性</p>
                            </div>
                            <div class="persistence-card">
                                <h4><i class="fas fa-history"></i> 版本備份</h4>
                                <p>定期備份資料檔案防止資料遺失</p>
                            </div>
                            <div class="persistence-card">
                                <h4><i class="fas fa-sync-alt"></i> 自動同步</h4>
                                <p>系統啟動時自動載入最新資料</p>
                            </div>
                        </div>
                    </div>
                </section>                <section id="design-patterns" class="docs-section">
                    <h2><i class="fas fa-drafting-compass"></i> 設計模式</h2>
                    
                    <div class="patterns-grid">
                        <div class="pattern-card">
                            <h3><i class="fas fa-crown"></i> Singleton 模式</h3>
                            <p><strong>應用：</strong> DatabaseManager 資料庫管理</p>
                            <p><strong>用途：</strong> 確保整個應用程式只有一個資料庫連接實例，統一管理所有資料操作</p>
                            <div class="code-example">
                                <pre><code>class DatabaseManager {
private:
    static DatabaseManager* instance;
    QSqlDatabase db;
    DatabaseManager() {}
    
public:
    static DatabaseManager* getInstance() {
        if (!instance) {
            instance = new DatabaseManager();
        }
        return instance;
    }
};</code></pre>
                            </div>
                        </div>

                        <div class="pattern-card">
                            <h3><i class="fas fa-signal"></i> Signal-Slot 模式</h3>
                            <p><strong>應用：</strong> Qt視窗間通訊</p>
                            <p><strong>用途：</strong> 實現視窗間的解耦通訊，響應用戶操作和系統事件</p>
                            <div class="code-example">
                                <pre><code>// 在loginWindow中
signals:
    void loginSuccess(const QString& accountId);
    void loginFailed(const QString& error);

// 在Controller中
public slots:
    void handleLogin(const QString& accountId, const QString& password);

// 連接信號槽
connect(loginWindow, &loginWindow::loginAttempt,
        controller, &Controller::handleLogin);</code></pre>
                            </div>
                        </div>

                        <div class="pattern-card">
                            <h3><i class="fas fa-eye"></i> Observer 模式</h3>
                            <p><strong>應用：</strong> 餘額更新通知</p>
                            <p><strong>用途：</strong> 當帳戶餘額變化時自動更新所有相關的Qt視窗顯示</p>
                            <div class="code-example">
                                <pre><code>// 在Controller中發出信號
signals:
    void balanceUpdated(const QString& accountId, double newBalance);

// 在userWindow中接收
public slots:
    void updateBalanceDisplay(const QString& accountId, double balance) {
        if (accountId == currentAccountId) {
            ui->balanceLabel->setText(QString::number(balance));
        }
    }</code></pre>
                            </div>
                        </div>

                        <div class="pattern-card">
                            <h3><i class="fas fa-window-restore"></i> MVC 模式</h3>
                            <p><strong>應用：</strong> Qt視窗架構</p>
                            <p><strong>用途：</strong> 分離視圖(Qt視窗)、模型(資料庫)和控制器(業務邏輯)</p>
                            <div class="code-example">
                                <pre><code>// Model: DatabaseManager
class DatabaseManager {
    QSqlDatabase db;
    bool updateBalance(QString accountId, double amount);
};

// View: Qt視窗
class userWindow : public QMainWindow {
    Ui::userWindow *ui;
};

// Controller: 業務邏輯
class Controller : public QObject {
    DatabaseManager* dbManager;
    void processTransaction();
};</code></pre>
                            </div>
                        </div>
                    </div>
                </section>                <section id="scalability" class="docs-section">
                    <h2><i class="fas fa-expand-arrows-alt"></i> 擴展性設計</h2>
                    
                    <div class="scalability-aspects">
                        <div class="aspect-card">
                            <h3><i class="fas fa-plus-circle"></i> 功能擴展</h3>
                            <ul>
                                <li><strong>新視窗模組：</strong> 可輕鬆添加新的Qt視窗功能</li>
                                <li><strong>多語言支援：</strong> Qt國際化系統支援多語言</li>
                                <li><strong>新支付方式：</strong> 可添加QR Code、NFC等支付</li>
                                <li><strong>通知系統：</strong> 可擴展QSystemTrayIcon通知</li>
                            </ul>
                        </div>

                        <div class="aspect-card">
                            <h3><i class="fas fa-database"></i> 資料擴展</h3>
                            <ul>
                                <li><strong>資料庫整合：</strong> 可整合 MySQL、PostgreSQL</li>
                                <li><strong>雲端資料庫：</strong> 支援遠端資料庫連接</li>
                                <li><strong>資料同步：</strong> Qt Network支援多節點同步</li>
                                <li><strong>快取系統：</strong> 可添加QCache記憶體快取</li>
                            </ul>
                        </div>

                        <div class="aspect-card">
                            <h3><i class="fas fa-network-wired"></i> 介面擴展</h3>
                            <ul>
                                <li><strong>Web整合：</strong> QWebEngine支援Web介面</li>
                                <li><strong>REST API：</strong> QNetworkAccessManager API服務</li>
                                <li><strong>行動支援：</strong> Qt for Mobile跨平台開發</li>
                                <li><strong>第三方整合：</strong> Qt Plugin系統擴展</li>
                            </ul>
                        </div>

                        <div class="aspect-card">
                            <h3><i class="fas fa-shield-alt"></i> 安全擴展</h3>
                            <ul>
                                <li><strong>加密強化：</strong> QCA加密模組整合</li>
                                <li><strong>SSL/TLS：</strong> QSslSocket安全通訊</li>
                                <li><strong>硬體安全：</strong> Qt支援智慧卡讀取</li>
                                <li><strong>生物識別：</strong> 可整合指紋、人臉識別</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="performance" class="docs-section">
                    <h2><i class="fas fa-tachometer-alt"></i> 效能考量</h2>
                    
                    <div class="performance-metrics">
                        <div class="metric-card">
                            <h3><i class="fas fa-clock"></i> 回應時間</h3>
                            <div class="metric-value">< 100ms</div>
                            <p>基本操作回應時間</p>
                        </div>
                        <div class="metric-card">
                            <h3><i class="fas fa-database"></i> 資料處理</h3>
                            <div class="metric-value">1000+</div>
                            <p>帳戶併發處理能力</p>
                        </div>
                        <div class="metric-card">
                            <h3><i class="fas fa-memory"></i> 記憶體使用</h3>
                            <div class="metric-value">< 50MB</div>
                            <p>系統記憶體佔用</p>
                        </div>
                        <div class="metric-card">
                            <h3><i class="fas fa-hdd"></i> 檔案大小</h3>
                            <div class="metric-value">< 5MB</div>
                            <p>可執行檔大小</p>
                        </div>
                    </div>                    <div class="optimization-strategies">
                        <h3>效能優化策略</h3>
                        <div class="strategy-grid">
                            <div class="strategy-item">
                                <h4><i class="fas fa-bolt"></i> Qt視窗優化</h4>
                                <ul>
                                    <li>使用Qt智慧指標(QPointer)管理物件</li>
                                    <li>適當使用QWidget::setUpdatesEnabled</li>
                                    <li>QSS樣式預編譯與快取</li>
                                </ul>
                            </div>
                            <div class="strategy-item">
                                <h4><i class="fas fa-search"></i> 資料庫優化</h4>
                                <ul>
                                    <li>使用QSqlQuery預編譯語句</li>
                                    <li>SQLite索引優化查詢性能</li>
                                    <li>QSqlDatabase連接池管理</li>
                                </ul>
                            </div>
                            <div class="strategy-item">
                                <h4><i class="fas fa-file"></i> 信號槽優化</h4>
                                <ul>
                                    <li>使用Qt::QueuedConnection避免阻塞</li>
                                    <li>適當使用Qt::DirectConnection</li>
                                    <li>避免循環信號槽連接</li>
                                </ul>
                            </div>
                            <div class="strategy-item">
                                <h4><i class="fas fa-code"></i> Qt程式碼優化</h4>
                                <ul>
                                    <li>使用QStringBuilder優化字串處理</li>
                                    <li>QList與QVector適當選擇</li>
                                    <li>Qt編譯時優化選項設定</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 回到頂部按鈕 -->
                <button id="scrollToTop" class="scroll-to-top" title="回到頂部">
                    <i class="fas fa-arrow-up"></i>
                </button>
            </div>
        </div>
    </main>

    <!-- 頁尾 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>ATM Banking System</h3>
                <p>專業的銀行自動櫃員機模擬系統</p>
            </div>
            <div class="footer-section">
                <h4>技術文檔</h4>
                <ul>
                    <li><a href="architecture.html">系統架構</a></li>
                    <li><a href="api-reference.html">程式碼參考</a></li>
                    <li><a href="#design-patterns">設計模式</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>開發團隊</h4>
                <p>Architecture: system@atm-system.com</p>
                <p>GitHub: <a href="https://github.com/your-repo">Architecture Guide</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 ATM Banking System. All rights reserved.</p>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
</body>
</html>
